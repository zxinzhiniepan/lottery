!(function(l,h){function j(b){this.options={id:"",canvasId:"verifyCanvas",width:"100",height:"30",type:"blend",code:""};if(Object.prototype.toString.call(b)=="[object Object]"){for(var a in b){this.options[a]=b[a]}}else{this.options.id=b}this.options.numArr="0,1,2,3,4,5,6,7,8,9".split(",");this.options.letterArr=g();this._init();this.refresh()}j.prototype={version:"1.0.0",_init:function(){var c=h.getElementById(this.options.id);var b=h.createElement("canvas");this.options.width=c.offsetWidth>0?c.offsetWidth:"100";this.options.height=c.offsetHeight>0?c.offsetHeight:"30";b.id=this.options.canvasId;b.width=this.options.width;b.height=this.options.height;b.style.cursor="pointer";b.innerHTML="您的浏览器版本不支持canvas";c.appendChild(b);var a=this;b.onclick=function(){a.refresh()}},refresh:function(){this.options.code="";var b=h.getElementById(this.options.canvasId);if(b.getContext){var c=b.getContext("2d")}else{return}c.textBaseline="middle";c.fillStyle=i(180,240);c.fillRect(0,0,this.options.width,this.options.height);if(this.options.type=="blend"){var d=this.options.numArr.concat(this.options.letterArr)}else{if(this.options.type=="number"){var d=this.options.numArr}else{var d=this.options.letterArr}}for(var a=1;a<=4;a++){var e=d[k(0,d.length)];this.options.code+=e;c.font=k(this.options.height/2,this.options.height)+"px SimHei";c.fillStyle=i(50,160);c.shadowOffsetX=k(-3,3);c.shadowOffsetY=k(-3,3);c.shadowBlur=k(-3,3);c.shadowColor="rgba(0, 0, 0, 0.3)";var f=this.options.width/5*a;var p=this.options.height/2;var q=k(-30,30);c.translate(f,p);c.rotate(q*Math.PI/180);c.fillText(e,0,0);c.rotate(-q*Math.PI/180);c.translate(-f,-p)}for(var a=0;a<4;a++){c.strokeStyle=i(40,180);c.beginPath();c.moveTo(k(0,this.options.width),k(0,this.options.height));c.lineTo(k(0,this.options.width),k(0,this.options.height));c.stroke()}for(var a=0;a<this.options.width/4;a++){c.fillStyle=i(0,255);c.beginPath();c.arc(k(0,this.options.width),k(0,this.options.height),1,0,2*Math.PI);c.fill()}},validate:function(b){var b=b.toLowerCase();var a=this.options.code.toLowerCase();console.log(a);if(b==a){return true}else{this.refresh();return false}}};function g(){var a="a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z";return a.split(",")}function k(a,b){return Math.floor(Math.random()*(b-a)+a)}function i(c,d){var a=k(c,d);var b=k(c,d);var e=k(c,d);return"rgb("+a+","+b+","+e+")"}l.GVerify=j})(window,document);